<div id="kt_aside" class="aside aside-menu" data-kt-drawer="true" data-kt-drawer-name="aside" data-kt-drawer-activate="{default: true, lg: false}" data-kt-drawer-overlay="true" data-kt-drawer-width="{default:'200px', '300px': '250px'}" data-kt-drawer-direction="start" data-kt-drawer-toggle="#kt_aside_mobile_toggle">
    <div class="aside-toolbar flex-column-auto" id="kt_aside_toolbar">
        <div class="aside-user d-flex align-items-sm-center justify-content-center py-5">
            <div class="symbol symbol-40px symbol-circle">
                <div class="symbol-label fs-2 fw-bold bg-custom-blue text-inverse-primary">
                    {{ app.user.company ? app.user.company.name|slice(0,1) : app.user|slice(0,1) }}
                </div>
            </div>


            <div class="aside-user-info flex-row-fluid flex-wrap ms-5">
                <div class="d-flex">
                    <div class="flex-grow-1 me-2">
                        <a href="{{ path('mission_index') }}" class="text-gray-600 text-hover-primary fw-bold">
                            {{ app.user.company ? app.user.company.name : app.user }}
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="aside-menu flex-column-fluid" data-turbo="false">
        <div class="hover-scroll-overlay-y px-2 my-5 my-lg-5" id="kt_aside_menu_wrapper" data-kt-scroll="true" data-kt-scroll-height="auto" data-kt-scroll-dependencies="{default: '#kt_aside_toolbar, #kt_aside_footer', lg: '#kt_header, #kt_aside_toolbar, #kt_aside_footer'}" data-kt-scroll-wrappers="#kt_aside_menu" data-kt-scroll-offset="5px">
            <div class="menu menu-column menu-title-gray-800 menu-state-title-primary menu-state-icon-primary menu-state-bullet-primary menu-arrow-gray-500" id="#kt_aside_menu" data-kt-menu="true">
                <div class="menu-item">
                    <a class="menu-link {% if app.request.get('_route') matches '/^mission/' %}active bg-gray-200{% endif%}" href="{{ path('mission_index') }}">
                        <span class="menu-icon">
                            <span class="svg-icon svg-icon-2">
                                <i class="fas fa-bullseye {% if app.request.get('_route') matches '/^mission/' %}text-custom-pink{% endif%}"></i>
                            </span>
                        </span>
                        <span class="menu-title {% if app.request.get('_route') matches '/^mission/' %}text-custom-blue fw-bolder{% endif%}">Mission</span>
                    </a>
                </div>

                {% if is_granted('ROLE_ADMIN') %}
                    <div data-kt-menu-trigger="click" class="menu-item menu-accordion here show">
                        <span class="menu-link">
                            <span class="menu-icon">
                                <span class="svg-icon svg-icon-2">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                        <path opacity="0.3" d="M22 12C22 17.5 17.5 22 12 22C6.5 22 2 17.5 2 12C2 6.5 6.5 2 12 2C17.5 2 22 6.5 22 12ZM12 7C10.3 7 9 8.3 9 10C9 11.7 10.3 13 12 13C13.7 13 15 11.7 15 10C15 8.3 13.7 7 12 7Z" fill="black" />
                                        <path d="M12 22C14.6 22 17 21 18.7 19.4C17.9 16.9 15.2 15 12 15C8.8 15 6.09999 16.9 5.29999 19.4C6.99999 21 9.4 22 12 22Z" fill="black" />
                                    </svg>
                                </span>
                            </span>
                            <span class="menu-title">Paramètres</span>
                            <span class="menu-arrow"></span>
                        </span>
                        <div class="menu-sub menu-sub-accordion menu-active-bg">
                            <div class="menu-item">
                                <a class="menu-link {% if app.request.get('_route') matches '/^client/' %}active bg-gray-200{% endif%}" href="{{ path('client_index') }}">
                                    <span class="menu-bullet">
                                        <span class="bullet bullet-dot {% if app.request.get('_route') matches '/^client/' %}bg-custom-pink{% endif%}"></span>
                                    </span>
                                    <span class="menu-title {% if app.request.get('_route') matches '/^client/' %}text-custom-blue fw-bolder{% endif%}">Clients</span>
                                </a>
                            </div>
                            <div class="menu-item">
                                <a class="menu-link {% if app.request.get('_route') matches '/^sub_contractor/' %}active bg-gray-200{% endif%}" href="{{ path('sub_contractor_index') }}">
                                    <span class="menu-bullet">
                                        <span class="bullet bullet-dot {% if app.request.get('_route') matches '/^sub_contractor/' %}bg-custom-pink{% endif%}"></span>
                                    </span>
                                    <span class="menu-title {% if app.request.get('_route') matches '/^sub_contractor/' %}text-custom-blue fw-bolder{% endif%}">Sous-traitants</span>
                                </a>
                            </div>
                            <div class="menu-item">
                                <a class="menu-link {% if app.request.get('_route') matches '/^company/' %}active bg-gray-200{% endif%}" href="{{ path('company_index') }}">
                                    <span class="menu-bullet">
                                        <span class="bullet bullet-dot {% if app.request.get('_route') matches '/^company/' %}bg-custom-pink{% endif%}"></span>
                                    </span>
                                    <span class="menu-title {% if app.request.get('_route') matches '/^company/' %}text-custom-blue fw-bolder{% endif%}">Entreprise</span>
                                </a>
                            </div>
                            <div class="menu-item">
                                <a class="menu-link {% if app.request.get('_route') matches '/^job/' %}active bg-gray-200{% endif%}" href="{{ path('job_index') }}">
                                    <span class="menu-bullet">
                                        <span class="bullet bullet-dot {% if app.request.get('_route') matches '/^job/' %}bg-custom-pink{% endif%}"></span>
                                    </span>
                                    <span class="menu-title {% if app.request.get('_route') matches '/^job/' %}text-custom-blue fw-bolder{% endif%}">Métiers</span>
                                </a>
                            </div>
                            <div class="menu-item">
                                <a class="menu-link {% if app.request.get('_route') matches '/^workflow/' %}active bg-gray-200{% endif%}" href="{{ path('workflow_index') }}">
                                    <span class="menu-bullet">
                                        <span class="bullet bullet-dot {% if app.request.get('_route') matches '/^workflow/' %}bg-custom-pink{% endif%}"></span>
                                    </span>
                                    <span class="menu-title {% if app.request.get('_route') matches '/^workflow/' %}text-custom-blue fw-bolder{% endif%}">Gestion process</span>
                                </a>
                            </div>
                            <div class="menu-item">
                                <a class="menu-link {% if app.request.get('_route') matches '/^email_template_/' %}active bg-gray-200{% endif%}" href="{{ path('email_template_index') }}">
                                    <span class="menu-bullet">
                                        <span class="bullet bullet-dot {% if app.request.get('_route') matches '/^email/' %}bg-custom-pink{% endif%}"></span>
                                    </span>
                                    <span class="menu-title {% if app.request.get('_route') matches '/^email/' %}text-custom-blue fw-bolder{% endif%}">Email</span>
                                </a>
                            </div>
                            <div class="menu-item">
                                <a class="menu-link {% if app.request.get('_route') matches '/^system_email_/' %}active bg-gray-200{% endif%}" href="{{ path('system_email_index') }}">
                                    <span class="menu-bullet">
                                        <span class="bullet bullet-dot {% if app.request.get('_route') matches '/^system_email_/' %}bg-custom-pink{% endif%}"></span>
                                    </span>
                                    <span class="menu-title {% if app.request.get('_route') matches '/^system_email_/' %}text-custom-blue fw-bolder{% endif%}">Emails système</span>
                                </a>
                            </div>
                            <div class="menu-item">
                                    <a class="menu-link {% if app.request.get('_route') matches '/^accounting/' %}active bg-gray-200{% endif%}" href="{{ path('accounting_index') }}">
                                    <span class="menu-bullet">
                                        <span class="bullet bullet-dot {% if app.request.get('_route') matches '/^accounting/' %}bg-custom-pink{% endif%}"></span>
                                    </span>
                                    <span class="menu-title {% if app.request.get('_route') matches '/^accounting/' %}text-custom-blue fw-bolder{% endif%}">Comptabilité</span>
                                </a>
                            </div>
                        </div>
                    </div>
                {% endif %}
                {% if is_granted('ROLE_SUBCONTRACTOR') == true %}
                    <div class="menu-item">
                        <a class="menu-link {% if app.request.get('_route') matches '/^my_profil/' %}active bg-gray-200{% endif%}" href="{{ path('my_profil') }}">
                        <span class="menu-icon">
                            <i class="fas fa-user"></i>
                        </span>
                            <span class="menu-title {% if app.request.get('_route') matches '/^my_profil/' %}text-custom-blue fw-bolder{% endif%}">Mon compte</span>
                        </a>
                    </div>
                {% endif %}
                {% if is_granted('ROLE_CLIENT') == true %}
                    <div class="menu-item">
                        <a class="menu-link {% if app.request.get('_route') matches '/^my_profil_client/' %}active bg-gray-200{% endif%}" href="{{ path('my_profil_client') }}">
                        <span class="menu-icon">
                            <i class="fas fa-user"></i>
                        </span>
                            <span class="menu-title {% if app.request.get('_route') matches '/^my_profil_client/' %}text-custom-blue fw-bolder{% endif%}">Mon compte</span>
                        </a>
                    </div>
                {% endif %}
                <div class="menu-item">
                    <a class="menu-link" href="{{ path('app_logout') }}">
                        <span class="menu-icon">
                            <i class="fas fa-external-link-alt"></i>
                        </span>
                        <span class="menu-title">Se déconnecter</span>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div class="aside-footer flex-column-auto py-5" id="kt_aside_footer">
        <a href="#" target="_blank">
            <img src="{{ asset('build/media/logo-myflow.png') }}" width="175">
        </a>
    </div>
</div>
