<div class="modal fade" id="addActionModal" tabindex="-1" aria-labelledby="addActionModalLabel" aria-hidden="true" {{ stimulus_target('workflow--handle', 'addActionModal') }}>
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            {{ form_start(addActionForm, {'attr':{'novalidate':'novalidate','data-workflow--handle-target':'addActionForm'}}) }}
                <div class="modal-body">
                    <div class="form-group row">
                        <div class="col-sm-6 col-lg-3">
                            {{ form_row(addActionForm.name, {'label_attr':{'class':'fs-2 fw-bolder'}, 'attr':{'class':'form-control', 'data-workflow--handle-target':'addActionNameInput'}}) }}
                        </div>
                        <div class="col-sm-6 col-lg-3">
                            {{ form_row(addActionForm.recipient, {'label_attr':{'class':'fs-2 fw-bolder'}, 'attr':{'class':'form-control', 'data-workflow--handle-target':'addActionRecipientInput'}}) }}
                        </div>
                        <div class="col-sm-6 col-lg-3" {{ stimulus_target('workflow--handle', 'addActionJobContainer') }}>
                            {{ form_row(addActionForm.job, {'label_attr':{'class':'fs-2 fw-bolder'}, 'attr':{'class':'form-control', 'data-workflow--handle-target':'addActionJobInput'}}) }}
                        </div>
                    </div>
                    <div class="form-group row mt-5">
                        <div class="col-2 fs-2 fw-bolder">Déclencheur</div>
                        <div class="col-2 fs-2 fw-bolder">Type</div>
                        <div class="col-2 fs-2 fw-bolder">Délais</div>
                        <div class="col-2 fs-2 fw-bolder">Action</div>
                        <div class="col-3 fs-2 fw-bolder">Email Auto. associé</div>
                        <div class="col-1"></div>
                    </div>
                    <div
                        id="trigger_container"
                        class="form-group row"
                        data-prototype="{{ include('workflow/_trigger_prototype.html.twig', {'form': addActionForm.triggers})|e }}"
                        data-widget-tags="{{ '<div class="mt-3 bg-secondary bg-opacity-50 py-3 px-4"></div>'|e }}"
                        {{ stimulus_target('workflow--handle', 'addTriggerContainer') }}
                    ></div>
                    <div class="row mt-4">
                        <div class="col-10 offset-1 d-grid gap-2">
                            <button
                                type="button"
                                class="btn btn-icon bg-secondary w-auto"
                                {{ stimulus_action('workflow--handle', 'addTriggerWidget') }}
                                data-selector="#trigger_container"
                            ><i class="fas fa-plus text-my-flow"></i></button>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <a
                        class="d-none btn btn-danger"
                        {{ stimulus_target('workflow--handle', 'deleteActionButton') }}
                        onclick="return confirm('Êtes-vous sûr de vouloir supprimer cette action ?')"
                    >
                        Supprimer
                    </a>
                    <button
                        type="button"
                        class="btn btn-primary-custom"
                        {{ stimulus_action('workflow--handle','submitAddActionForm') }}
                    >
                        <span class="indicator-label">
                            Enregistrer
                        </span>
                        <span class="indicator-progress">
                            Enregistrement en cours... <span class="spinner-border spinner-border-sm align-middle ms-2"></span>
                        </span>
                    </button>
                </div>
                {{ form_widget(addActionForm.step, {'attr':{'data-workflow--handle-target':'hiddenActionStepId'}}) }}
                {{ form_widget(addActionForm.actionId, {'attr':{'data-workflow--handle-target':'hiddenActionId'}}) }}
            {{ form_end(addActionForm) }}
        </div>
    </div>
</div>
